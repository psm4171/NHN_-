관계 대수와 관계해석

관계 해석은 어떤 데이터를 원하는지를 명시적으로 기술하는 반면, 관계 대수는 데이터를 어떻게 얻을 것인지에 중점을 둡니다. 두 접근 방식은 수학적이며, 서로 등가하다는 원리에 따라 관계형 데이터베이스 시스템에서 상호 보완적으로 사용됩니다.

- 관계 대수식은 연산자들의 모임을 사용해서 구성된 대수식
- 연산자들을 조합해서 복잡한 질의를 만들기 쉬움

### 셀렉션과 프로젝션

시그마( δ ) 연산자 : 릴레이션에서 투플들을 선택(Selction)할 수 있는 연산자 - 셀렉션 연산자

파이 ( π ) 연산자 : 필드들을 추출(Projection)할 수 있는 연산자 - 프로젝션 연산자 

셀렉션 연산자 σ는 셀렉션 조건을 통해 투플들을 명세 : *파일럿(파일럿번호: 정수, 파일럿이름: 문자열, 등급: 정수, 나이: 실수)*

| 파일럿번호 | 파일럿이름 | 등급 | 나이 |
| --- | --- | --- | --- |
| 13 | 홍길동 | 1 | 44 |
| 32 | 이순신 | 10 | 44 |
| 4 | 안중근 | 7 | 32 |

프로젝션 연산자 π는 한 릴레이션의 필드들을 추출 : *π파일럿이름, 등급(Pilot1)*

| 파일럿이름 | 등급 |
| --- | --- |
| 이순신 | 10 |
| 안중근 | 7 |

카티션 프로덕트

R X S는 R의 모든 필드와 S의 모든 필드를 순서대로 가지는 스키마의 릴레이션 인스턴스를 만듭니다. R X S에는 r∈R, s∈S 쌍에 대하여 투플 <r, s>를 하나씩 가집니다. <r, s>는 투플 r과 투플 s를 접합(concatenation)하여 만드는 투플을 의미합니다.

카티션 프로덕션에 조건을 주고 값을 추출하는 것 - 이너조인,  아우터조인을 통해 사용자가 원하는 데이터를 추출한다. 

즉, 카티션 프로덕트와 선택 연산을 통해 두 개의 관계를 특정 조건에 맞게 조인하고, 원하는 데이터를 추출

예시) 

1. 사원 테이블

사원(Sawon)
+----+--------+-------+
| 사번 | 이름   | 부서  |
+----+--------+-------+
| 1  | 홍길동 | 101   |
| 2  | 김철수 | 102   |
| 3  | 박영희 | 101   |
+----+--------+-------+

1. 부서 테이블 

부서(Buseo)
+-------+--------+
| 부서번호 | 부서명  |
+-------+--------+
| 101   | 영업부  |
| 102   | 개발부  |
+-------+--------+

1. 사원과 부서 테이블을 카티션 프로덕트를 통해 생성한 결과 

+----+--------+-------+-------+--------+
| 사번 | 이름   | 부서  | 부서번호 | 부서명  |
+----+--------+-------+-------+--------+
| 1  | 홍길동 | 101   | 101   | 영업부  |
| 1  | 홍길동 | 101   | 102   | 개발부  |
| 2  | 김철수 | 102   | 101   | 영업부  |
| 2  | 김철수 | 102   | 102   | 개발부  |
| 3  | 박영희 | 101   | 101   | 영업부  |
| 3  | 박영희 | 101   | 102   | 개발부  |
+----+--------+-------+-------+--------+

1. 특정 조건을 만족하는 튜플을 선택하기 위해 선택 연산을 사용한 결과(조인 사용) 

SELECT * FROM 사원, 부서 WHERE 사원.부서 = 부서.부서번호;

1. 카티션 프로덕트와 선택 연산을 통한 두 관계를 조인하고 데이터 추출한 결과 

+----+--------+-------+-------+--------+
| 사번 | 이름   | 부서  | 부서번호 | 부서명  |
+----+--------+-------+-------+--------+
| 1  | 홍길동 | 101   | 101   | 영업부  |
| 2  | 김철수 | 102   | 102   | 개발부  |
| 3  | 박영희 | 101   | 101   | 영업부  |
+----+--------+-------+-------+--------+

조인 

- 둘 이상의 릴레이션으로 부터 정보를 조합하는 연산 (⋈)
- 유도된 연산으로, 카티션 프로덕트와 프로젝션 연산을 함께 실행하여 얻은 결과와 동일

보통 둘 이상의 릴레이션으로부터 정보를 조합해 낼 때 사용합니다. 조인은 카티션 프로덕트를 한 후에 프로젝션을 수행한 것과 같은 결과를 산출하지만 조인은 카티션 프로덕트보다 훨씬 적은 결과를 산출하기 때문에, 조인을 인식해서 구현하는 것이 중요

개명(Renaming) 연산자 로우(ρ)

릴레이션에서 필드의 이름을 변경(Renaming)할 수 있는 연산자

- 관계 대수식 안에서 이름 충돌이 발생할 수 있음
- 관계 대수식 안에서 릴레이션 인스턴스의 이름을 주는 것이 편리함
- 긴 대수식을 작은 부분으로 나누어 결과 인스턴스에 이름을 줄 수 있도록 하는 것이 편리함

이순신이 예약한 비행기 기종을 고르면 (비행기와 승객을 조인) 

승객과 비행기 조인이 되는가? 집합적으로는 안된다. 

select 비행기 기종 

from 승객 join 항공편  on 승객.승객id = 항공편.승객id

join 비행기 on 항공편.비행기id = 비행기.비행기id 

where 승객이름=’이순신’ / 승객.승객id = 항공편.승객id and 항공편.비행기id = 비행기.비행기id and 승객.이름 = ‘이순신’ 

*파일럿(파일럿번호: 정수, 파일럿이름: 문자열, 등급: 정수, 나이: 실수) 비행기(비행기번호: 정수, 비행기이름: 문자열, 비행기종류: 문자열) 운항(파일럿번호: 정수, 비행기번호: 정수, 운항일자: 날짜)*

각 릴레이션의 인스턴스가 아래와 같다고 할 때,

Pilot1

| 파일럿번호 | 파일럿이름 | 등급 | 나이 |
| --- | --- | --- | --- |
| 13 | 홍길동 | 1 | 44 |
| 32 | 이순신 | 10 | 44 |
| 44 | 안중근 | 7 | 32 |

AirCraft

| 비행기번호 | 비행기이름 | 비행기종류 |
| --- | --- | --- |
| 101 | 에놀라게이 | 폭격기 |
| 102 | 톰캣 | 전투기 |
| 102 | 블랙버드 | 정찰기 |

Flight

| 파일럿번호 | 비행기번호 | 운항일자 |
| --- | --- | --- |
| 13 | 101 | 2022-10-09 |
| 44 | 102 | 2022-11-23 |

관계 대수로 질의를 작성합니다.  δ  π ρ

1. 비행기 101을 운항하는 파일럿의 이름

→ π (이름δ(비행기번호(파일럿이름(비행기번호=101))) 

select 파일럿이름

from pilot1

where 비행기번호=101; 

1. 문제 1을 응용하여 개명 연산을 사용하여 각 대수식을 작은 부분으로 분할한 다음 합쳐 연산하는 관계 대수식을 작성

→ ρ(문제2(π(이름(파일럿번호))조인(π(비행기번호(비행기(

select 파일럿이름

from 파일럿 

left innter join 파일럿1.파일럿번호 = 비행기.파일럿번호 and flight.파일럿번호 = 파일럿1.파일럿번호 and 비행기번호 = 101; 

1. 전투기를 운항하는 파일럿의 이름을 구하세요.

아우터 조인으로 운항하지 않는 비행기 쿼리 

select 비행기이름 

from aircraft

outer join 운항날짜 = null 0n 비행기.비행기번호 = 운항.비행기번호

select* 

from flight inner join pilot on flight.파잇럿번호 = piloit.파일럿번호 

where flight.파일럿번호 = is null 

flight inner join pilot on flight.파잇럿번호 = piloit.파일럿번호
