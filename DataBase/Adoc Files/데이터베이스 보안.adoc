# 데이터베이스 보안

### 외부스키마

항공 관련 데이터베이스의 외부 스키마는 사용자 뷰 또는 응용 프로그램에 표시되는 데이터의 구조와 관련이 있습니다. 각 사용자 그룹이나 응용 프로그램에 따라 다른 외부 스키마가 정의될 수 있습니다. 아래는 항공 관련 데이터베이스의 간단한 예시 중 하나일 수 있습니다.

**예시: 항공 예약 시스템**

1. **관리자 뷰 (Admin View):**
    - 이 부분은 항공사 관리자들이 사용하는 뷰로, 항공편 정보, 승무원 스케줄, 수익 보고서 등의 데이터에 접근합니다.
    - 예를 들어, **`항공편정보`**, **`승무원스케줄`**, **`매출보고서`** 등의 테이블과 관련된 정보를 포함할 수 있습니다.
2. **고객 뷰 (Customer View):**
    - 이 부분은 고객이 항공편을 검색하고 예약하는 데 사용하는 뷰로, 항공편 정보, 좌석 가용성, 예약 내역 등의 데이터에 접근합니다.
    - 예를 들어, **`항공편정보`**, **`좌석가용성`**, **`예약내역`** 등의 테이블과 관련된 정보를 포함할 수 있습니다.
3. **직원 뷰 (Employee View):**
    - 항공사 직원들이 사용하는 뷰로, 승무원 정보, 스케줄, 급여 등의 데이터에 접근합니다.
    - 예를 들어, **`승무원정보`**, **`근무스케줄`**, **`급여정보`** 등의 테이블과 관련된 정보를 포함할 수 있습니다.

이러한 외부 스키마들은 각각의 사용자 그룹 또는 응용 프로그램이 필요로 하는 데이터에 중점을 두고 있습니다. 각 뷰는 데이터를 추상화하여 사용자가 필요로 하는 정보에 쉽게 접근할 수 있도록 합니다.

### 내부스키마

데이터베이스의 물리적 구조를 정의. 데이터의 저장과 관리를 위한 테이블, 인덱스, 제약조건 등의 세부 정보

- 테이블
    - 항공편 정보, 좌석가용성, 예약내역
- 인덱스
    - 항공편정보 테이블의 FlightID에 대한 클러스터드 인덱스
    - 예약내역 테이블의 ReservationID에 대한 클러스터드 인덱스
    - 좌석가용성 테이블의 FlightID와 SeatClass에 대한 비클러스터드 인덱스
- 제약조건
    - 외래키 제약조건을 사용하여 예약내역 테이블의 FlightID가 항공편정보 테이블의 FlightID를 참조하도록 함
    - 일부 필드에 고유(unique) 제약조건을 적용하여 데이터 무결성을 보장.
- 트리거 또는 저장 프로시저 등을 사용하여 이벤트 작업 수행

### 데이터베이스 보안 개요

- 1. 보안(Security)
    
    정보가 권한 없는 사용자에게 누출 되어서는 안된다. 예를 들어 학생이 다른 학생의 점수를 볼 수 없도록 해야 한다.
    
- 2. 무결성(Integrity)
    
    권한이 있는 사용자에 대해서만 데이터 수정이 허용되어야 한다. 예를 들어 학생들이 자기 점수는 볼 일이 있으나 그 점수를 수정할 수는 없도록 해야 한다.
    
- 3. 가용성(Availability)
    
    권한 있는 사용자의 접근이 거부 되어서는 안된다. 예를 들어 교수가 어떤 학점을 바꾸고자 하면 그렇게 할 수 있도록 허용되어야 한다.
    

### 재량 접근 제어

- GRANT : 테이블이나 뷰에 대한 특권을 부여
- REVOKE : 부여된 특권 허용을 취소

### 특권

- 권한이 부여된 사용자에는 개체를 작성하고, 소유한 개체에 접근하며, GRANT 문을 사용해 소유한 개체에 대한 권한을 다른 사용자에게 전달할 수 있음

사용자 생성 및 권한 제어 

```sql
Grant <특권> ON <개체> TO <사용자> with GRANT OPIONS

GRANT SELECT ON Module06.Aircraft TO Michael; // 마이클이 Module06의 Aircraft에 접근 가능 

GRANT SELECT(FlightNo) ON Module06.Flight TO Michael; // 마이클이 FlightNo 조회 가능 

GRANT ALL privileges ON Module06.* TO Michael; // 마이클에게 Module06에 대한 모든 특권 부여 

REVOKE ALL privileges ON Module06.* FROM Michael; // 마이클에게 부여된 모든 특권 삭제 
```

### 뷰(View)

관계 데이터베이스 관리 시스템의 매우 강력한 기능의 하나 

접근 제어를 향상시키며, 논리적 데이터 독립성을 제공 

- 데이터베이스 개념 스키마의 변경을 외부 사용자에게 감추는 역할
- 뷰는 보안적 관점에서만 작성된 개체 형태는 아님

질의를 생성하거나 다른 뷰를 생성할 때 기본 뷰는 테이블과 같은 형태로 사용할 수 있음

보안 측면에서 접근하기 용이한 것 

용도: mysql에 비해 oracle에서 사용, view의 단점은 속도가 느리다. view가 데이터를 가지고 있으면 material View 형태이다. Material View가 실제로 데이터를 저장하는 곳

보안적으로 튼튼하고 쉬운 View의 특징
